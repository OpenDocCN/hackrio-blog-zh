# 数据仓库建模中的星型模式

> 原文：<https://hackr.io/blog/star-schema-in-data-warehouse>

在最基本的形式下，数据库模式是关系数据库的逻辑配置的表示，作为整体或作为一部分。它也可以定义为通过逻辑视图展示整个数据库的框架结构。它可能只作为一个可视化的表示或作为一组管理数据库的公式而存在。这些公式通过数据定义语言(如 SQL)传达，以便系统理解。

模式的主要作用是定义数据将如何组织以及它们之间的关联将如何发生。它包含数据库的细节，由模式图描述。它还指定了诸如表、过程、视图等实体如何相互关联。一般来说，由数据库设计者设计的数据库模式旨在帮助其软件将与数据库交互的程序员。创建模式的过程称为数据建模。

数据库模式的两种主要类型是:

*   **逻辑数据库模式:** 逻辑数据库模式定义了应用于存储在数据库中的数据的约束。它可以定义视图、表、完整性约束和更多的  
*   **物理数据库模式:** 物理数据库模式记录了数据在存储系统中的物理存储方式。 

在数据库创建中，遵循了 **三模式方法** 来降低系统的复杂性，并使其能够高效地检索数据。使用三模式方法的目标是创建这样一个系统，即每个用户都应该根据他们的权限和要求看到数据库中数据的定制视图，而不必直接处理任何物理数据库存储。这种数据库建模方法中的三种模式是:

*   **内部级模式** :内部级模式是最低级别的数据抽象，定义了数据库的存储(物理)。这种模式在任何情况下都不处理物理设备，并且将任何物理设备视为物理页面的集合。这个模式告诉我们存储什么数据以及如何与数据库相对应。 
*   **概念或逻辑级模式** :概念(逻辑)模式迎合用户，为用户群体描述整个数据库的结构。它包含所有数据库实体的定义、它们的关系、属性以及安全信息。这个层次介于内在层次和外在层次之间。 
*   **外部级模式** :外部级模式解释特定用户关心的数据库元素，同时隐藏不相关的数据库细节。可能有“n”个外部视图，其中外部视图可以被定义为特定用户看到的数据库内容。每个外部视图都是通过外部模式定义的，该模式包含指定视图的不同类型的外部记录的定义。

## **数据库模式的类型**

在数据仓库中，有三种主要的模式，它们是:

*   星形模式
*   雪花模式
*   星系/事实星座模式

### **星形模式**

星型模式是一种用于表示多维数据的关系数据库模式。该模式是包含一个或多个维度和事实表的模式的最简单形式。它被称为星型模式，因为事实表和维度之间的实体关系图类似于星形。星型模式的优点是性能提高、数据切片和更容易理解。

### **雪花模式**

维度表层次结构被分解成更简单的表的模式结构被称为雪花模式。这是恒星的延伸版本，因其形状而被称为雪花。

### **星系模式/事实星座模式**

银河模式或事实星座模式是包含两个事实表的模式设计，这两个事实表共享维度表。由于这种模式被看作是恒星的集合，因此被称为星系模式。

[数据仓库初学者基础](https://click.linksynergy.com/deeplink?id=jU79Zysihs4&mid=39197&murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Fdata-warehouse-fundamentals-for-beginners%2F)

## **星形模式**

在计算中，星型模式是最简单的数据集市模式，广泛用于开发多维数据集市和数据仓库。由于事实表位于中心，维度表围绕着它，所以它看起来像一颗星，因此得名。这种方法将业务流程分为事实和维度，事实包含关于业务的定量数据，维度是与事实表中存储的数据相关的特征。

一般来说，事实数据可以包含销售价格、数量、时间和距离等。另一方面，维度表可以保存产品大小、销售人员详细信息、产品代码、需要交付的位置等等。在特殊情况下，当星型模式有多个维度时，由于其形状，也称为蜈蚣模式。

### **星型模式的优缺点**

在我们开始讨论星型模式的利弊之前，重要的是要明白仅仅坚持这种方法并不是前进的最佳选择。在某些情况下，星型模式可能会被证明是徒劳的。然而，在大多数情况下，这种方法的优点超过任何最小的不足。下面是星型模式的一些优点和缺点。

#### **优势**

*   **易于理解:**[OLTP](https://hackr.io/blog/olap-vs-oltp)(在线事务处理)系统的用户通过预定义的图形用户界面或预设的查询模板与应用程序一起工作。因此，用户不必理解后台的数据结构。数据库模式和数据结构仍然属于 IT 专业人员。然而，决策支持系统的用户将自己制定查询，并且如果并且当他们试图与数据仓库交互时，他们必须理解数据结构并且理解什么时候哪些数据将是可用的。
*   **优化导航:** 在数据库模式中定义实体间关系的目的是为您提供在数据库中导航的能力。该关系可用于在表之间移动，以获得您希望查找的信息。如果从一个表到另一个表的路径众多且复杂，导航过程将变得复杂且缓慢。但是如果连接路径是直接的，导航过程就简单、优化并且更快。这就是星型模式大放异彩的地方。这种方法优化了在数据库中的导航，即使预期有复杂的查询结果，导航也很简单。
*   **非常适合查询处理:** 由于星型模式是以查询为中心的结构，所以非常适合查询处理。不管有多少维度参与查询，也不管查询有多复杂，每个查询都将通过使用基于查询参数的筛选器从维度表中选择行，然后查找相应的事实表行来执行。由于星型模式中的简单连接路径，这个过程才是可能的。
*   **喂养立方体:** 星型模式被所有在线分析处理(OLAP)系统用来资源丰富地构建 OLAP 立方体。事实上，大多数 OLAP 系统都提供了一种称为 ROLAP 的操作模式，它直接使用星型模式作为数据源，而无需构建专有的多维数据集结构。
*   **特殊性能技术:** 在星型模式中，查询处理器软件可以通过启用可应用于查询的特定性能方案来利用更好的执行计划。两种最突出的特殊性能技术是星形连接和星形索引。星形连接可以在一次操作中连接多个表，从而提高查询性能。它是高速、可并行和单路的。Star-index 是一种特殊的索引，它通过在事实表的一个或多个外键上创建索引来提高连接性能。

#### **缺点**

*   **数据完整性:** 该过程的最大缺点是数据完整性的最小实现，因为它处于高度非规范化状态。
*   **缺乏灵活性:** 星型模式作为一种规范化的数据模型，在分析需求方面缺乏灵活性，只要遵循业务逻辑，就可以执行分析查询。由于星型模式更侧重于查看数据，它不允许复杂的分析。

### **设计星型模式涉及的步骤有:**

*   识别用于分析的业务流程(例如销售)
*   措施或事实的标识(销售货币)
*   事实维度的识别(产品、位置、时间和公司维度)
*   描述每个维度的列的列表(城市名、地区名、分行名、分行代码)
*   确定事实表中汇总的最低级别(销售货币)

### **星形模式 vs 雪花模式**

如上所述，星型模式是基本的数据仓库模式，之所以这样称呼是因为它的结构类似于星型。另一方面，雪花模式是星型模式的扩展版本，增加了额外的维度。这两种模式是全世界最常用的结构。它们之间的主要区别是:

| **星形模式** | **雪花模式** |
| 简化数据库设计 | 复杂的数据库设计 |
| 维度表存储维度的层次结构 | 层次结构被分成不同的表格 |
| 只有一个连接创建维度表和事实表之间的关系 | 在这个结构中，需要许多连接来获取数据 |
| 事实表被维度表包围 | 每个事实表都被一个维度表包围，而维度表又被一个维度表包围 |
| 高级数据冗余 | 低级数据冗余 |
| 更快的立方体处理速度 | 由于复杂的连接，立方体处理可能会变慢 |
| 反规范化数据结构 | 规范化数据结构 |
| 单个维度表包含聚合数据。 | 数据拆分到不同的维度表中。 |

## **结论**

星型模式是数据仓库中使用的维度模型的最简单形式。在本文中，我们讨论了星型模式的特性、如何生成它以及它的优缺点，然后与第二常用的模式结构进行了比较。如果您认为我们遗漏了什么或有任何问题，请在下面的窗口中随意评论。还可以在 [Hackr.io](https://hackr.io/) 上找到最好的编程、设计、DevOps、数据科学课程和教程。

**人也在读:**