# UNIX/LINUX 中的 20 大 AWK 命令及其示例[更新]

> 原文：<https://hackr.io/blog/awk-command-unix-linux-examples>

## 什么是 AWK？

它是一种脚本语言，被认为是 Linux 环境中最强大的命令。它不需要任何编译，通过处理一些文件然后分析这些文件来生成报告。它用于操作数据，因此适用于模式搜索和处理。

## AWK 能做什么手术？

*   逐行扫描文件。
*   将输入记录拆分成字段
*   将字段与模式进行比较
*   对动作匹配模式执行

## AWK 命令在 Linux 和 Unix 中有什么用处？

*   它有助于根据用户要求操作数据文件。
*   它生成格式化的输出。

## AWK 提供的各种程序结构是什么？

AWK 提供的各种编程概念有:

*   输出格式
*   内置变量
*   模式匹配
*   字符串操作
*   算术运算

## AWK 命令的基本语法

```
$ awk options 'selection _criteria ' input-file > output-file
```

## 各种 AWK 命令

考虑名为 sample.txt 的示例文本文件中的以下数据表

| **ID** | **名称** | **年龄** | **公司** | **技能** |
| 101 | 约翰 | 28 | 苹果 | ios |
| 102 | 克莉丝 | 33 | 隔壁 | 机器人 |
| 103 | 史密斯（姓氏） | 45 | 脸谱网 | 哈斯克尔 |
| 104 | 插口 | 33 | 苹果 | Java 语言(一种计算机语言，尤用于创建网站) |
| 105 | 五月 | 27 | 谷歌 | 计算机编程语言 |

### **1。逐行打印表格**

```
$ awk ‘’    sample.txt
```

上面的命令打印文件的每一行。

| **ID** | **名称** | **年龄** | **公司** | **技能** |
| 101 | 约翰 | 28 | 苹果 | ios |
| 102 | 克莉丝 | 33 | 隔壁 | 机器人 |
| 103 | 史密斯（姓氏） | 45 | 脸谱网 | 哈斯克尔 |
| 104 | 插口 | 33 | 苹果 | Java 语言(一种计算机语言，尤用于创建网站) |
| 105QQ | 五月 | 27 | 谷歌 | 计算机编程语言 |

### **2。按行打印表格**

```
$ awk ‘’ sample.txt
$ awk ‘’    sample.txt
```

上面的代码打印了表格的所有行。

| **ID** | **名称** | **年龄** | **公司** | **技能** |
| 101 | 约翰 | 28 | 苹果 | ios |
| 102 | 克莉丝 | 33 | 隔壁 | 机器人 |
| 103 | 史密斯（姓氏） | 45 | 脸谱网 | 哈斯克尔 |
| 104 | 插口 | 33 | 苹果 | Java 语言(一种计算机语言，尤用于创建网站) |
| 105 | 五月 | 27 | 谷歌 | 计算机编程语言 |

### **3。打印列**

```
$ awk ‘’    sample.txt
```

上面的代码打印表格的第一列。

类似地，我们可以打印表格的其他列。

```
$ awk ‘’    sample.txt
```

打印第二列

| **名称** |
| 约翰 |
| 克莉丝 |
| 史密斯（姓氏） |
| 插口 |
| 五月 |

```
$ awk ‘’    sample.txt
```

打印第三列

### **4。打印匹配图案**

将要匹配的特定模式放在正斜杠内，以打印匹配特定模式的行。语法:

```
$ awk ‘’    sample.txt
$ awk '/variable_to_be_matched/ '   file.txt
```

示例:打印字段中包含 Apple 的数据。

```
$ awk '/Apple/ '   sample.txt
```

上述命令打印以下行:

| 101 | 约翰 | 28 | 苹果 | ios |
| 104 | 插口 | 33 | 苹果 | Java 语言(一种计算机语言，尤用于创建网站) |

### **5。内置变量**

AWK 提供了一些有助于操纵和分析数据的内置变量。列出了一些内置变量。

#### **5.1。NR**

该变量返回包含当前输入记录数的行。

```
$ awk ‘’ sample.txt
```

上面的命令计算数据中输入记录的数量。在本例中，该表总共包含六条记录。

| **1** | **ID** | **名称** | **年龄** | **公司** | **技能** |
| 2 | 101 | 约翰 | 28 | 苹果 | ios |
| 3 | 102 | 克莉丝 | 33 | 隔壁 | 机器人 |
| 四 | 103 | 史密斯（姓氏） | 45 | 脸谱网 | 哈斯克尔 |
| 5 | 104 | 插口 | 33 | 苹果 | Java 语言(一种计算机语言，尤用于创建网站) |
| 6 | 105 | 五月 | 27 | 谷歌 | 计算机编程语言 |

#### 5.2。NF

该变量打印每条记录的字段计数。

```
$ awk ‘’ sample.txt
```

上面的命令打印表格的最后一列。

#### 5.3。$NF

该变量返回表的最后一列

```
$ awk ‘’ sample.txt
```

| **技能** |
| ios |
| 机器人 |
| 哈斯克尔 |
| Java 语言(一种计算机语言，尤用于创建网站) |
| 计算机编程语言 |

同样，我们可以打印表格的倒数第二列和倒数第三列。

```
$ awk ‘’ sample.txt
```

| **名称** | **公司** |
| 约翰 | 苹果 |
| 克莉丝 | 隔壁 |
| 史密斯（姓氏） | 脸谱网 |
| 插口 | 苹果 |
| 五月 | 谷歌 |

```
$ awk ‘’ sample.txt
```

| **名称** | **年龄** |
| 约翰 | 28 |
| 克莉丝 | 33 |
| 史密斯（姓氏） | 45 |
| 插口 | 33 |
| 五月 | 27 |

#### 5.4。ORS ( **)输出记录分隔符**

该变量以所需的输出格式分隔每条记录。

```
$ awk ‘ BEGIN ’    sample.txt
```

打印以下输出:

```
ID  Name  Age  Company  Skill: 101  John  28  Apple  iOS:  102  Chris  33  NextDoor  Android: 103  Smith  45  Facebook Haskell:  104  Jack 33  Apple  Java: 105  May 27  Google  Python:
```

#### **5.5。OFS**

输出字段分隔符该变量以所需的输出格式分隔每个字段。

```
$ awk ‘ BEGIN ’    sample.txt
$ awk ‘ BEGIN ’    sample.txt
```

```
ID==Name 101==John
102==Chris
103==Smith
104==Jack
105==May
```

```
$ awk ‘ BEGIN ’    sample.txt
```

#### 5.6。RS

它是当前记录分隔符。默认的记录分隔符是换行符，因为在默认情况下，输入行就是输入记录。

```
RS$ awk ‘ BEGIN ’    sample.tx
```

### **6。IF 命令**

该命令对数据集应用条件，并打印满足条件的数据。语法:

```
$ awk ‘{ if(condition) } END  ’ file.txt
```

示例:打印文件中最长一行的长度。

```
$ awk '{ if (length($0) > max) max = length($0) } END { print max }' sample.txt
```

### **7。字符串操作**

我们还可以用 AWK 命令对文件进行字符串操作。语法:

```
$ awk ‘{ if(condition) print $0}’ sample.txt
```

示例:

```
$ awk ‘{ if($1 == “John” ) print $0}’   sample.txt
```

上面的代码打印任何字段包含“John”的行。

```
$ awk ‘{ if($1 == “Apple” ) print $0}’   sample.txt
```

上面的代码打印任何包含“Apple”的字段的行

| 101 | 约翰 | 28 | 苹果 | ios |
| 104 | 插口 | 33 | 苹果 | Java 语言(一种计算机语言，尤用于创建网站) |

[Linux 命令行，Bash Shell，脚本 AWK &基于 Linux 的 SED](https://click.linksynergy.com/deeplink?id=jU79Zysihs4&mid=39197&murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Flinux-commands%2F)

### **8。长度**

该命令计算每行字符的长度。示例:打印超过十个字符的行

```
$ awk ‘length($0) > 24 ’   sample.txt
```

上面的命令打印字符长度大于 24 的行。

| 102 | 克莉丝 | 33 | 隔壁 | 机器人 |
| 103 | 史密斯（姓氏） | 45 | 脸谱网 | 哈斯克尔 |

### **9。计数**

计算文件中的行数

```
$ awk ‘END ’   sample.txt
```

因为文件中有六行，所以打印为六。6

### 10。对于

打印从 1 到 n 的第一个数字的平方。让 n = 5

```
$ awk 'BEGIN { for(i=1;i<=6;i++) print "square of", i, "is",i*i; }'
```

输出:

```
square of 1 is 1
square of 2 is 4
square of 3 is 9
square of 4 is 16
square of 5 is 25
```

### **11。非空行**

$ awk ' NF > 0 ' sample.txt 输出:0

### **12。算术运算**

如果表格元素是数字，AWK 命令允许执行算术运算。

```
$ awk ‘ ’   sample.txt
```

输出:

### 13。保存输出

使用重定向操作符“>”保存输出结果。可以使用 cat 命令来验证结果。

```
$ cat output.txt
```

## **结论**

Linux 中的 AWK 命令使程序员能够以语句的形式编写有用的程序，这些语句定义了要在文件的每一行中搜索的特定模式，以及当在一行中找到匹配时要采取的动作。Unix 中的 AWK 命令用于模式处理和扫描。它搜索一个或多个文件，查看它们是否包含与指定模式匹配的行，然后执行相关的操作。

**人也在读:**