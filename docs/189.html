<html>
<head>
<title>How to Make a Chrome Extension: Intermediate Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何制作Chrome扩展:中级教程</h1>
<blockquote>原文：<a href="https://hackr.io/blog/how-to-make-a-chrome-extension#0001-01-01">https://hackr.io/blog/how-to-make-a-chrome-extension#0001-01-01</a></blockquote><div><div class="content">
										<p>谷歌Chrome是当今使用最广泛的网络浏览器，Chrome扩展是很棒的软件开发工具，可以用新功能扩展Chrome的功能。谷歌已经创建了<a href="https://developer.chrome.com/extensions/overview">综合文档</a>，提供基本信息并开始行动。</p>
<p>但是随着扩展复杂性的增加，我们必须依赖像Stackoverflow和<a href="https://hackr.io/"> Hackr.io </a>这样的第三方论坛来寻求帮助。</p>
<p>在本文中，我们将介绍创建中级Chrome扩展的过程，这将减少YouTube网站上视频播放器控件的不透明度，以增加内容的可见性。</p>
<p>在本Chrome扩展教程结束时，你将知道如何制作一个Chrome扩展。</p>

<h3 id="what-is-a-chrome-extension">什么是Chrome扩展？</h3>
<p>Chrome扩展是你的Chrome浏览器的插件。但是你可能会问自己:</p>
<p>为什么首先要构建一个Chrome扩展？</p>
<p>Chrome扩展改进、扩展和定制了浏览器的功能。许多软件解决方案都有“扩展”——也称为“附加组件”或“插件”。</p>
<p>但是Chrome让开发扩展变得非常容易。</p>
<h3 id="why-create-a-chrome-extension">为什么要创建Chrome扩展？</h3>
<p>如今，程序员依赖大量创新的网络开发理念和其他工具来增强他们的体验。</p>
<p>因此，创建一个Chrome扩展是很好的编程实践。</p>

<p>你可以把它添加到你的编程组合中，或者只是开发你梦想中的Chrome浏览器。有些人为了工作创建一次性的Chrome扩展，而有些人为了好玩开发Chrome扩展。</p>
<h3 id="where-can-you-get-ideas-for-chrome-extensions">你可以从哪里获得Chrome扩展的想法？</h3>
<p>要创建Chrome扩展项目，想一想你可能想在你的Chrome浏览器上看到的东西。你也可以看看一些最流行的Chrome扩展:</p>
<ul>
<li aria-level="1"><a href="https://chrome.google.com/webstore/detail/checker-plus-for-google-c/hkhggnncdpfibdhinjiegagmopldibha?hl=en">谷歌日历检查器</a>。使用嵌入式谷歌日历，确保您不会错过日程安排中的任何事情。</li>
<li aria-level="1"><a href="https://chrome.google.com/webstore/detail/grammarly-grammar-checker/kbfnbcaeplbcioakkpcpgfkobkghlhen">语法上</a>。在出售任何电子邮件(或文件)之前，检查其中的语法或拼写错误。</li>
<li aria-level="1"><a href="https://chrome.google.com/webstore/detail/lastpass-free-password-ma/hdokiejnpimakedhajhdlcegeplioahd?hl=en-US">最后一遍</a>。密码管理器非常受欢迎——尤其是在当今这个单点登录和双因素身份验证的世界。</li>
</ul>
<p>在很大程度上，Chrome扩展帮助你更容易地完成工作。但是它们也可以用于购物(像<a href="https://chrome.google.com/webstore/detail/honey-automatic-coupons-r/bmnlcjabgnpnenekpadlanbbkooimhnj"> Honey </a>优惠券应用)或娱乐(像<a href="https://chrome.google.com/webstore/detail/edit-anything/kgkhambjbahgejgoaefmekdchedkihln?hl=en">编辑任何东西</a>网络编辑器)。</p>
<p>准备好学习如何构建Chrome扩展了吗？继续读。</p>
<h2 id="step-by-step-how-to-make-a-chrome-extension-for-video-player-controls"><strong>循序渐进:如何为视频播放器控件制作Chrome扩展</strong></h2>
<p>成为一个成功的Chrome扩展构建者最简单的方法就是实践。让我们从视频播放器控件的Chrome扩展开始。</p>
<p>当你暂停了视频，但是视频播放器控件隐藏了视频的内容时，我们的Chrome扩展会很有用。</p>
<p>以YouTube为例。当您暂停YouTube视频时，播放器控制总是可见的，例如这个关于Chrome OS的视频:</p>
<p><img src="../Images/6b0d0a8d636653ea50a49cf2961e837d.png" alt="Youtube with Player" data-original-src="https://hackr.io/blog/media/youtube-with-player-1.png"/></p>
<p>因此，我们将学习如何创建Chrome扩展代码来操作这个覆盖。创建插件后，我们将能够在暂停视频时删除播放器，结果如下:</p>
<p><img src="../Images/3ad6d11c537d06b94ec52f0c49f4d2b5.png" alt="YouTube video without the player visible" data-original-src="https://hackr.io/blog/media/youtube-with-hide-player.png"/></p>
<h3 id="toc-1-create-a-manifest-json-file"><strong> 1。创建一个Manifest.json文件</strong></h3>
<p>本Chrome extensions教程的第一步是创建manifest.json文件。</p>
<p><a href="https://developer.chrome.com/extensions/manifest"> manifest.json </a>文件包含重要的扩展信息，比如它的名称、版本、动作和权限。每个扩展都必须有一个manifest.json文件。</p>
<p>因此，让我们在一个空目录中创建一个manifest.json文件，其中包含必需的字段:</p>
<pre class="language-json"><code>{
"manifest_version": 2,
"name": "My First Extension",
"version": "0.1"
}</code></pre>
<p>这就创建了一个基本的Chrome扩展，它只是将扩展加载到Chrome中。请记住,“manifest_version”必须始终为2，因为从2014年1月开始不再支持版本1。此外，清单文件必须包含上述三个字段。</p>
<h3 id="toc-2-load-the-extension-into-chrome"><strong> 2。将扩展载入Chrome </strong></h3>
<p>制作Chrome扩展的下一步是将扩展加载到Chrome中。\</p>
<p>打开Chrome扩展页面。要做到这一点，要么点击右上角的三个点，然后进入“更多工具”，然后“扩展”或者，去地址栏输入:“Chrome://extensions/”</p>
<p>之后，打开右上方的“开发者模式”，然后点击左上方的“加载解包”。</p>
<p><img src="../Images/452bc8be4a9425e17967fdd9a3845526.png" alt="Load Extensions" data-original-src="https://hackr.io/blog/media/load-extensions.png"/></p>
<p>现在，浏览到包含清单文件的目录，然后选择该文件夹。下面的列表不会显示该扩展名。</p>
<p>在对代码进行任何更改之后，您可以通过单击位于<em>扩展</em>右侧的小刷新图标来刷新扩展。</p>
<p><img src="../Images/90c8c883874639917d86c0e9cbc4a984.png" alt="screenshot of the loaded YouTube player controls." data-original-src="https://hackr.io/blog/media/loaded-manifest.png"/></p>
<h3 id="toc-3-develop-your-content-scripts"><strong> 3。开发您的内容脚本</strong></h3>
<p>根据官方文档，<a href="https://developer.chrome.com/extensions/content_scripts">内容脚本</a>是在网页上下文中运行的文件。他们可以读取或修改网页，并通过标准文档对象模型(DOM)将信息传递给他们的父扩展。</p>
<p>内容脚本可以与它们的父扩展交换“消息”,因此可以访问它们的父扩展使用的Chrome APIs。一些常用的Chrome APIs包括onConnect、onMessage和sendMessage等。所有这些对于制作Chrome扩展和构建Chrome扩展架构都很重要。</p>
<p>内容脚本与外部环境完全隔离，这使它们能够对自己的Javascript环境进行更改，而不会影响网页或其他内容脚本。</p>
<p>综上所述，内容脚本可以访问和修改浏览器访问的网页。这将它们与项目中的其他Javascript文件区分开来。内容脚本必须在清单文件中声明，连同它们的细节，比如允许它们访问哪个URL。</p>
<h3 id="toc-4-inject-your-content-scripts"><strong> 4。注入你的内容脚本</strong></h3>
<p>内容脚本可以以编程或声明的两种方式注入网页。在这个例子中，我们使用编程注入，因为我们只需要在特定的情况下运行脚本。在我们注入脚本之前，我们必须首先在清单中提供活动选项卡权限，这使得脚本能够在当前活动的选项卡上运行。如果您想在新选项卡上自动执行内容脚本，您必须在清单中声明内容脚本。</p>

<p>所以我们像这样更新manifest.json文件:</p>
<pre class="language-json"><code>"permissions": ["activeTab"],
"content_scripts": [
{
"matches": ["https://www.YouTube.com/*"],
"js": ["contentScript.js"]
}
]</code></pre>
<p>现在我们可以将内容脚本注入到网页中。我们可以注入一部分代码，或者整个文件。在本例中，我们将注入整个javascript文件contentScript.js。注入该文件后，它将修改YouTube播放器窗口，以减少播放器控件的不透明度。该文件包含以下代码:</p>
<pre class="language-javascript"><code>//contentScript.js
var s = document.getElementById('stylehidecontrols');
if (s) {
s.remove();
}
else {
s = document.createElement('style');
s.id = 'stylehidecontrols';
var r = '#movie_player .ytp-gradient-top, #movie_player .ytp-gradient-bottom, #movie_player .ytp-Chrome-top, #movie_player .ytp-progress-bar-container, #movie_player .ytp-Chrome-controls';
s.appendChild(document.createTextNode(r));
document.body.appendChild(s);
}</code></pre>
<p>首先，我们尝试查找id为“stylehidecontrols”的元素如果找到了，我们就把它去掉，使不透明度恢复正常。如果没有找到，那么我们必须降低视频播放器控件的不透明度。为此，我们首先创建一个“style”元素来包含CSS样式信息，并为其分配id“stylehidecontrols”，这是我们之前试图找到的。</p>
<p>现在我们用YouTube网站中各种已知元素的CSS样式信息创建一个文本，这些元素与视频播放器相关联。然后，我们把它赋给一个变量r。</p>
<p>注意:我们将所有这些元素的不透明度设置为0.2，因此它们不会阻挡视图，但仍然可见，并且可以操作。</p>
<p>现在我们用变量“r”创建一个节点，然后把它附加到样式元素“s”上，最后，我们把“s”附加到文档体上。这将使新样式立即生效，并降低视频控件的不透明度。如果再次单击扩展图标，它将从DOM中移除样式元素，从而将不透明度恢复到原始状态。</p>
<h3 id="toc-5-develop-your-background-scripts"><strong> 5。开发您的背景脚本</strong></h3>
<p>为了以编程方式注入内容脚本，我们需要一个javascript文件，它总是在后台运行并监听click事件。内容脚本有一些限制，因为它们不能侦听点击事件。因此，我们需要一个可以访问Chrome API的后台脚本，但不能访问网页。</p>
<p>这个后台脚本监听特定的事件。然后，它可以将javascript代码注入到页面中，进而可以访问和修改网页。我们必须在清单中声明后台脚本文件，如下所示:</p>
<pre class="language-javascript"><code>"background": {
"scripts": ["backgroundScript.js"]
}</code></pre>
<p>后台脚本负责监听click事件，然后将“contentScript.js”文件注入页面。后台脚本的内容是:</p>
<pre class="language-javascript"><code>//backgroundScript.js
Chrome.browserAction.onClicked.addListener(
function(tab) {
Chrome.tabs.executeScript(tab.id, {
"file": "contentScript.js"
});
});</code></pre>
<p>在这个例子中，我们直接将文件注入到页面中。我们还可以使用消息传递来完成这项任务，其中后台脚本将在单击事件时向内容脚本发送一条消息，然后内容脚本将侦听该特定消息。如果收到消息，它将执行代码。</p>

<p>当您编写Chrome扩展代码时，内容脚本也可以“以声明方式”注入为此，我们可以在manifest.json文件中添加如下内容:</p>

<pre class="language-json"><code>"content_scripts": [
{
"matches": ["http://*.mywebsite.com/*"],
"CSS": ["styles.CSS"],
"js": ["contentScript.js"]
}
]</code></pre>
<p>CSS字段是可选的，可用于为匹配的页面注入CSS文件。它们按照在数组中声明的顺序被注入。</p>
<h3 id="toc-6-create-your-actions"><strong> 6。创建您的行动</strong></h3>
<p>动作对Chrome扩展开发很重要。Chrome扩展可以有两种类型的动作，页面动作和浏览器动作。与浏览器操作不同，页面操作只能作用于当前页面。我们可以使用动作为扩展包含图标和弹出窗口。要在Google Chrome主工具栏中放置图标，请将其添加到manifest.json文件中:</p>
<pre class="language-json"><code>"browser_action": {
"default_icon": {
"32": "icon.png"
}
}</code></pre>
<p>您可以在图像编辑器(如Photoshop、Illustrator或Gimp)中创建任何大小的图标。此外，您可以从互联网上下载所需大小的图标。一旦你有了图标，把它和当前的名字放在根文件夹中。</p>
<p>这在Chrome的主工具栏中增加了一个32乘32大小的图标。我们也可以包括其他大小的图标，但如果没有提供，Chrome会自动调整图标的大小以适应相应的大小。</p>
<h3 id="toc-7-build-your-complete-manifest-json-file"><strong> 7。构建完整的Manifest.json文件</strong></h3>
<p>这是你开发Chrome插件的最后一步。在我们将上述所有字段添加到manifest.json文件中之后，它将看起来像这样:</p>
<pre class="language-json"><code>//manifest.json
{
"manifest_version": 2,
"name": "Youtube Player Controls",
"version": "0.1",
"description": "This extension reduces the opacity of Youtube video player controls for better visibility of the content.",
"background": {
"scripts": ["backgroundScript.js"]
},
"permissions": ["activeTab"],
"content_scripts": [
{
//"matches": [""],
"matches": ["https://www.YouTube.com/*"],
"js": ["contentScript.js"]
}
],
"browser_action": {
"default_icon": {
"32": "icon.png"
}
}
}</code></pre>
<p>最终的目录结构如下:</p>
<ul>
<li aria-level="1">背景脚本. js</li>
<li aria-level="1">内容脚本. js</li>
<li aria-level="1">icon.png</li>
<li aria-level="1">manifest.json</li>
</ul>
<p><a class="btn btn-primary btn-call-to-action btn-block" href="https://click.linksynergy.com/link?id=jU79Zysihs4&amp;offerid=1045023.3925774&amp;type=2&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Fchrome-extension%2F" target="_blank" rel="noopener"> React &amp; TypeScript Chrome扩展开发【2023】</a></p>
<h2 id="conclusion-how-to-develop-chrome-extensions"><strong>结论:如何开发Chrome扩展</strong></h2>
<p>我们已经经历了如何制作Chrome扩展的完整分解。</p>
<p>但这只是一个基本的预览。</p>
<p>有关Chrome扩展及其后台工作方式的更多信息，请访问<a href="https://developer.chrome.com/extensions/overview">官方文档</a>或关于如何开发Chrome扩展的教程。</p>

<p>需要更多灵感？</p>

<p><a href="https://hackr.io/blog/free-seo-tools"> <strong>查看Chrome最好的免费SEO工具</strong> </a></p>
<h2 id="frequently-asked-questions"><strong>常见问题解答</strong></h2>
<h4 id="toc-1-is-it-easy-to-make-chrome-extensions"><strong> 1。做Chrome扩展容易吗？</strong></h4>
<p>如果你已经是一名程序员，那么制作自己的Chrome扩展会非常容易。但在它准备好进入Chrome商店之前，你需要对它进行广泛的测试和质量控制。</p>
<h4 id="toc-2-can-you-make-your-own-google-extension"><strong> 2。可以自己做Google扩展吗？</strong></h4>
<p>任何人都可以制作自己的Google扩展。你的谷歌扩展将在你的本地Chrome部署(在你自己的电脑上)上运行，除非你将它上传到Chrome market place——在那里任何人都可以使用它，就像下载iOS或Android的应用程序一样。</p>
<h4 id="toc-3-what-are-google-extensions-written-in"><strong> 3。谷歌扩展是用什么写的？</strong></h4>
<p>Google扩展使用流行的web技术HTML、CSS和JavaScript。正因为如此，它们是练习构建网站和web应用程序的好方法。</p>
<h4 id="toc-4-how-much-does-it-cost-to-publish-a-chrome-extension"><strong> 4。发布一个Chrome扩展需要多少钱？</strong></h4>
<p>发布一个Chrome扩展只要5美元。但是你应该确保你符合谷歌的质量标准——并且要知道那些下载你的扩展的人也可以评价和审查它！</p>

									</div>

									</div>    
</body>
</html>