# C 语言中结构和联合的区别

> 原文：<https://hackr.io/blog/difference-between-structure-and-union>

在 C/C++中，结构和联合是两种用户定义的数据类型。在这篇博文中，我们将试图理解它们是如何工作的，以及它们之间到底有什么不同。

## **什么是结构？(结构)**

Struct 是一种用户定义的数据类型，用于存储可能属于不同数据类型的数据组合。为了进一步解释，考虑如何在 [C/C++](https://hackr.io/blog/difference-between-c-and-cplusplus) 中存储一个学生的信息，这里需要存储以下参数:

*   名称
*   类
*   电话号码
*   电子邮件地址

一种方法是将它存储在 4 个不同的数组中: ` name[], class[], phone[], email[]`。基本上，`name[i] ` 会代表第 I 个 第 个学生的名字。`class[i]` 将代表该班级对应的学生。`phone[i]` 代表电话号码，`email[i]` 代表我学生的电子邮件地址。

这种方法的优点是它是最容易想到的方法。缺点是用这种方式管理一个学生相当困难。这里，我们只有四个参数。想象一下，我们有 400 个参数与一个学生相关联。人们根本无法管理 400 个阵列。这就是结构发挥作用的地方。

**定义结构**

通过 struct，我们可以定义单个学生的结构如下:

```
struct Student {
 string name;
 int class;
 string phone;
 string email;
}

```

然后我们可以简单地将学生数组定义为:`Student students[10]` 。

上面的结构完美地捕捉到了一个学生的细节。这种实现的一些优点如下:

*   某个学生的所有变量都打包在一起，这样就干净多了。
*   特定学生的参数都是按顺序存储在计算机内存中的。这大大提高了学生数据的缓存效率。

## **什么是联合？**

假设我们正在对生活在我们社会中的各种人进行调查。作为调查的一部分，我们的目的是记录不同人的身高(毫米)和体重(公斤)。高度可能是 1700 毫米左右。重量可能是 74.23 公斤。身高总是一个整数值(以毫米为单位),而体重可以是分数。这里的问题是，对一些人来说，我们只有身高数据。对于其他人，我们只有体重数据。存储这种数据的明显方法是创建一个结构。

```
struct Person {
 int height;
 double weight;
}

```

这里的问题是我们只有每个人的身高或体重。但是，我们正在为两者分配空间。这导致了内存的浪费。如果我们可以只存储那些身高可用的人的身高，只存储那些我们有体重值的人的体重，那会怎么样？这将使事情简单得多，也节省内存。这就是工会的帮助所在。

```
union Person {
 int height;
 double weight;
}

```

现在，我们可以轻松地存储一个人的详细信息如下:

```
union Person person1 = ;
union Person person2 = {.weight=74.23};

```

当我们创建 person1 对象时，空间只分配给高度。没有为重量分配空间。类似地，当我们创建 person2 对象时，空间只分配给重量。没有为高度分配空间。这里，根据架构的不同，我们在第一个和第二个对象上都节省了 4 - 8 个字节。想象一下，如果我们有十亿人的数据，我们将能够节省多少字节？

让我们来看看代码

该代码的输出如下:

注意，在第一种情况下，person1_union 和 person2_union 的大小都是 8 个字节。这是因为联合需要存储最大数据类型的大小作为它的一部分。例如，如果一个 union 存储一个字符和一个 double 值，它的大小将是 double 值的大小，因为即使它存储一个字符，也应该为 double 值分配空间。

这里最棒的是我们已经实现的大小节省——实际上是 struct 大小的一半。想象一下，如果我们为地球上的每个人存储这样的数据，我们将节省几千兆字节的存储空间/成本。

## **结构和联合的区别**

让我们以表格的形式总结一下我们对联合和结构的理解，以突出结构和联合 : 之间的差异

| 结构体 | 联盟 |
| --- | --- |
| 用于存储各种数据类型，这些数据类型在聚合时表示用户定义的数据类型。 | 用于存储许多可用数据类型中的一种。 |
| 它为每个内部参数占用空间。 | 占用的空间相当于最大尺寸的参数。 |
| 所有成员在任一时间点都存储一些值。 | 在任何特定的实例中，只有一个成员存储值。 |

[掌握数据结构&使用 C 和 C++](https://click.linksynergy.com/link?id=jU79Zysihs4&offerid=1045023.2121018&type=2&murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Fdatastructurescncpp%2F) 算法

## **结论**

这就是结构和联合的主要区别。这两个是数据结构的类型。这两种是用户定义的数据类型，包含不同数据类型的变量。

**人也在读:**