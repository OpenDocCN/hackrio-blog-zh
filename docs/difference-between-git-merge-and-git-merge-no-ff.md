# Git Merge 和 Git Merge - no-ff 的区别

> 原文：<https://hackr.io/blog/difference-between-git-merge-and-git-merge-no-ff>

Git 是一个版本控制系统或 VCS，主要用于源代码管理，也用于跟踪对一个或一组文件所做的更改。它可以简化多个开发人员在同一个项目中的各个过程。

简而言之，Git 弥合了分配给单一任务的不同开发人员的个人工作与期望输出之间的差距。其中一个顶级 Git 命令是 git merge。它有几个变体，包括 git merge - no-ff 命令。

尽管这两个 git 命令执行的基本功能是相同的，即，将两个或多个分支合并为一个分支，但是 Git merge 命令的两种变体之间存在一定程度的区别，必须了解这一点，以便最大限度地利用这两个命令。

但是在比较这两个 git 命令之前，我们先来了解一下 git 合并操作到底是什么意思以及其他一些相关的概念，即快进合并和 3 路合并。

## **Git 合并命令**

git merge 命令获取 git 分支创建的不同开发线，并将它们组合成一个分支。尽管当前分支被更新以反映合并结果，但目标分支保持不变。git 命令通常与以下命令一起使用:

*   git checkout -选择当前分支。
*   删除过时的目标分支。

### **流程**

Git merge 命令将许多提交序列组合(合并)到一个统一的历史中。该命令从接受两个提交指针开始，这两个提交指针通常是要合并的两个分支中最近的提交。

接下来，它开始为两者寻找一个公共的基础提交。找到后，git merge 命令创建一个新的合并提交，它合并了两个排队的合并提交序列中的每一个所做的更改。

与其他提交相比，合并提交的独特之处在于它有两个父提交。Git 在创建合并提交时会自动尝试合并不同的历史。如果遇到在两个历史中被更改的数据，则需要用户干预。

### **准备工作**

为了确保合并过程顺利进行，在执行合并提交之前，需要注意以下事项:

*   **确认接收分支** - 为此，执行 git status 命令，确保头指向相关的合并接收分支。如果没有，使用 git checkout < branch >命令切换到所需的接收分支。
*   **获取最新的远程提交** - 通过执行 Git fetch 命令以获取最新的远程提交，然后执行 Git pull 命令以确保主分支拥有最新的更新，从而确保接收和合并分支符合最新的远程更改。

### **快进合并和三向合并**

一个[快速前进合并](https://docs.gitlab.com/ee/user/project/merge_requests/fast_forward_merge.html)是当 Git 移动分支指针指向传入的提交，而不是构造一个合并提交。虽然这通常发生在执行 git pull 命令而没有任何本地更改的时候，但是对于 git merge 命令也可能发生。

因为从目标分支可到达的所有提交现在都可以通过当前分支获得，所以快速前进合并合并了两个分支的历史记录。然而，当分支出现分歧时，快速合并是不可能的。

当没有到目标分支的线性路径时，Git 使用三向合并来合并两个分支。它使用一个专用的提交将两个历史联系在一起。之所以这样叫，是因为在三向合并中，Git 使用三次提交来生成合并提交；两个分支尖端和它们的共同祖先。

通常，快速前进合并被开发人员用于小功能或错误修复，而三路合并被保留用于集成长期运行的功能。

### **git merge vs. git merge --no-ff**

通常，开发人员利用 git merge 命令来合并两个分支。git 命令将两个或多个提交合并(组合)到一个历史中。它的一般语法是:

git merge<branch></branch>

默认情况下，git merge 命令是快进合并。当存在从当前分支顶端到目标分支的线性路径时，快进合并是可能的。

在这种情况下，Git 并不实际合并两个分支，而是集成历史，即以前的提交，将当前分支顶端移动到目标分支顶端。

对于在快进合并期间需要合并提交的场景，我们使用带有- no-ff 标志的 Git merge 命令。这个 git 命令的一般语法是:

git merge --no-ff<branch></branch>

Git merge - no-ff 命令将指定的分支合并到当前分支中的命令中，并确保执行合并提交，即使是快进合并。它有助于在相关的 git repo 中记录所有执行的 merge 命令。

当 Git 检测到当前头是您尝试合并的提交的祖先时，使用- no-ff 参数可以防止 Git merge 命令执行快进合并。

### **没有快进合并**

大多数情况下，快速前进合并是首选。但是，有时可能需要防止快速合并的发生。通常，这是在维护明确的分支拓扑时。

为此，可以使用 git merge 命令传递- no-ff 参数。结果，git merge 命令将构造一个提交合并，而不是快进。

### **git 合并不能快进怎么办？**

如果您希望执行 Git merge 命令来显式地执行一个快速前进的合并，并且如果它不能快速前进的话需要撤销，该怎么办呢？有什么办法可以做到这一点吗？是的，有。

为此，您必须使用- ff-only 参数，而不是使用- no-ff 参数。在这种情况下，如果在此过程中出现错误，您可以返回并决定是否进行合并或重定基础。

### **如何合并 2 个以上的分支？**

git merge 命令提供了对一系列合并策略的支持。对于合并两个以上的分支，有两种策略可用:

#### **1。章鱼**

这种 Git 合并策略主要用于合并主题分支头。在提取或合并多个分支时，这是默认的合并策略。因此，这是合并两个分支时使用的策略。

尽管 octopus 合并策略适用于解决具有两个以上头的情况，但它不能用于执行需要手动解决的复杂合并。

#### **2 .熊〔t1〕**

我们的合并策略可以解决任何数量的头。然而，合并的结果树属于当前分支头的树，并且忽略来自剩余分支的所有改变。它通常用于取代分支的旧开发历史。

Git & Github 训练营

## **Git Merge 和 Git Merge - no-ff:头对头比较**

| **参数** | **Git Merge** | **Git Merge --no-ff** |
| **目的** | 合并两个分支 | 整合了历史 |
| **语法** | git merge<branch></branch> | git merge --no-ff<branch></branch> |
| **快进** | 是 | 不 |

## **结论**

到目前为止，您必须清楚 git merge 和 Git merge - no-ff 命令之间的区别。理解这种差异对于正确使用这两个 git 命令非常重要。

发现文章中有错误/误导信息？抱歉。请通过下面的专用评论部分与我们分享相同的内容，以帮助我们尽快修复它。已经谢谢了。想提高自己的 Git 技能？试试这些[最佳 Git 教程](https://hackr.io/tutorials/learn-git)。

**人也在读:**